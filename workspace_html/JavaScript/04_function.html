<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Function</title>
        <script>
            // function 키워드로 함수 선언
            function plus(x, y) {
                let z = x + y;
                return z;
            }
            let a = plus(5, plus(3, 4));
            console.log(a);

            // 전달인자가 없으면 초기값, 있으면 전달인자를 사용하는 방어 코딩(plus2, plus3)
            function plus2(x, y) {
                if(x == undefined) {    // !x, !y로 쓸 수도 있음(null, NaN, false 등의 가능성 대비)
                    x = 0;
                }
                if(y == undefined) {
                    y = 0;
                }
                return x + y;
            }
            function plus3(x = 0, y = 1) {
                return x + y;
            }
            e = plus3(1, 2);
            console.log(e);

            console.log(1,2,3,4,5,6);

            // spread 연산자
            function log( ...obj ) {
                console.log( typeof obj );
                console.log(obj[1]);
                console.log(obj);
            }
            log(1,2);
            let f = [10, 20];
            console.log(...f); // = console.log(f[0], f[1]);

            let g = "console.log(123)";
            // string을 JavaScript로 변환
            eval(g);

            function print() {
                console.log('print 실행');
            }
            let p = print;
            console.log(typeof p);
            p();
            let p2 = print();
            console.log(p2);

            console.log(typeof print);

            function print2() {
                console.log('print2 실행');
            }
            function print2() {
                console.log('print3 실행');
            }
            print2();

            function over(x) {
                console.log(x);
            }
            function over(x,y) {
                console.log(x,y);
            }
            over(1);
            console.log(1, typeof over);

            over = 1;
            console.log(2, typeof over);
            // over(); 순서대로 보았을 때, over는 1로 초기화되면서 함수(변수)가 아니게 됨

            // callback
            // krw-usd 간 환율 계산기
            function chg_usd_krw(money1) {
                return money1 * 1354.75;
            }
            function chg_krw_use(money2) {
                return money2 / 1354.75;
            }

            // 환전 함수
            // 전달 인자 : 금액, 환율 계산 함수
            function chg(money3, callback) {
                console.log('환전 시작');
                // 위 코드의 방어 코딩
                if(typeof callback == 'function') {
                    return callback(money3);
                }
                else {
                    console.log('callback 없음');
                }
            }
            const money = chg(100, chg_usd_krw);
            console.log('환전된 금액은', money);

            // 익명 함수
            // 변수에 넣어버리면 가능
            let noName = function () {
                console.log('익명함수');
            }
            // 위의 익명함수와 동일함
            function noName1 () {
                console.log('익명함수');
            }
            // 이렇게 쓰면 실행 가능
            noName();
            noName1();

            // 두 chg()는 기능이 동일함
            const m = 100;
            chg(m, noName);
            chg(100, function () {
                console.log('익명함수');
            });

            // setTimeout
            // 전달인자 : 실행함수(callback), 지연 시간
            setTimeout(
                function() {
                    console.log('지연실행');
                }
                , 1000 * 1
            );
            // setTimeout보다 하단의 콘솔 출력이 먼저 실행됨
            console.log('콘솔 출력');

            let set = setTimeout(
                function() {
                    console.log('지연실행 set');
                }
                , 1000 * 1
            );
            clearTimeout(set); // 예약 취소와 비슷한 배경
            console.log(set);

            let itv_idx = setInterval(
                function() {
                    console.log('setInterval 실행'),
                    1000 * 10
                }
            );
            clearInterval(itv_idx);

            // 화살표 함수 : arrow function
            let test0 = function (a, b) {
                console.log(a, b);
                return a;
            }
            let test1 = (a, b) => {
                console.log(a, b)
                return a;
            }

            let test2 = (a) => {
                console.log(a)
                return a;
            }

            let test4 = () => {
                console.log('전달인자 없으면 생략 불가');
            }

            let test5 = (a, b) => {
                return a + b;
            }
            let test6 = (a, b) => a + b
            let test7 = a => a * 3;
            console.log(test7(9));
            
        </script>
    </head>
    <body></body>
</html>